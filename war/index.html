<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<style>
		body{font-family:arial;font-size:0.9em;background-color:white;}
	</style>
	<meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
	<meta name="robots" content="noindex,follow" />
	<title>Cálculo de tarifa de taxi</title>
	<script src="http://maps.google.com/maps?file=api&v=2&key=AIzaSyDlDHfxVEG0L1XMKILfgLi1We-XKjtcfbU" type="text/javascript"></script>
	
	<script type="text/javascript">
 
	var geocoder, location1, location2, gDir;
 
	function initialize() {
		geocoder = new GClientGeocoder();
		gDir = new GDirections();
		GEvent.addListener(gDir, "load", function() {
			var startValue = 3.78;
			var regularRate = 1.89;
			var specialRate = 2.46;
			
			var drivingDistanceMiles = gDir.getDistance().meters / 1609.344;
			var drivingDistanceKilometers = Math.round(gDir.getDistance().meters / 1000);
			var totalAmmount = drivingDistanceKilometers * regularRate + startValue;
			var total=totalAmmount.toString();
			document.getElementById('results').innerHTML = '<strong>Origem: </strong>' + location1.address + '<br /><strong>Destino: </strong>' + location2.address + '<br /><strong>Distância: </strong>' + drivingDistanceKilometers + ' Km <br/><strong>Valor:</strong> R$ '+total.substr(0,5).replace('.',',');
		});
	}
 
	function showLocation() {
		geocoder.getLocations(document.forms[0].address1.value+',Porto Alegre - Rio Grande do Sul', function (response) {
			if (!response || response.Status.code != 200)
			{
				alert("O endereço de partida não é válido");
			}
			else
			{
				location1 = {lat: response.Placemark[0].Point.coordinates[1], lon: response.Placemark[0].Point.coordinates[0], address: response.Placemark[0].address};
				geocoder.getLocations(document.forms[0].address2.value+',Porto Alegre - Rio Grande do Sul', function (response) {
					if (!response || response.Status.code != 200)
					{
						alert("O endereço de destino não é válido");
					}
					else
					{
						location2 = {lat: response.Placemark[0].Point.coordinates[1], lon: response.Placemark[0].Point.coordinates[0], address: response.Placemark[0].address};
						gDir.load('from: ' + location1.address + ' to: ' + location2.address);
					}
				});
			}
		});
	}
 
	</script>
</head>
 
<body onload="initialize()">
	<h2> Cálculo de tarifas de táxi em Porto Alegre</h2>
	<br/>
	<form action="#" onsubmit="showLocation(); return false;">
		<p>
			<input type="text" name="address1" value="Origem" onfocus="javascript:this.value=''" />
			<input type="text" name="address2" value="Destino" onfocus="javascript:this.value=''" />
			<input type="submit" value="Calcular" />
		</p>
	</form>
	<p id="results"></p>
	<br/>
	</br>
	<h6>
	Bandeirada: R$ 3,78 (comum) ou R$ 5,67 (Táxi Perua)<br/>
Quilômetro rodado: comum: R$ 1,89 (bandeira 1) ou R$ 2,46 (bandeira 2)</br> 
Táxi Perua: R$ 2,84 (bandeira 1) ou R$ 3,69 (bandeira 2)
	</h6>
 
</body>
</html>